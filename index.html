<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog do Vakeiroo</title>
    <link rel="stylesheet" href="style.css"> <!-- Seu arquivo de estilo -->
</head>
<body>
    <h1>Blog do Vakeiroo</h1>
    <p>Bem-vindo ao blog do Vakeiroo!</p>
    <!-- Conteúdo do seu site -->
    
    <!-- Adicione aqui o conteúdo do painel de administração e outros elementos HTML que você já tem -->

    <script src="script.js"></script>
    <script src="protecao.js"></script>
    <script src="painel-admin.js"></script>

    <!-- Service Worker e Cache -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('Service Worker registrado com sucesso:', registration);
                    })
                    .catch((error) => {
                        console.log('Falha ao registrar o Service Worker:', error);
                    });
            });
        }

        // O conteúdo do seu Service Worker estará aqui
        if ('serviceWorker' in navigator) {
            const CACHE_NAME = 'blog-do-vakeiro-cache-v1';
            const filesToCache = [
                '/',
                '/index.html',
                '/style.css',
                '/script.js',
                '/protecao.js',
                '/painel-admin.html',
                '/login.js',
                '/email-alert.js',
                '/admin-panel.js',
                '/admin-panel.html',
                '/admin-dashboard.js',
            ];

            // Instalar o service worker e armazenar arquivos no cache
            self.addEventListener('install', (event) => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then((cache) => {
                            console.log('Arquivos em cache');
                            return cache.addAll(filesToCache);
                        })
                );
            });

            // Ativar o service worker e limpar caches antigos
            self.addEventListener('activate', (event) => {
                const cacheWhitelist = [CACHE_NAME];

                event.waitUntil(
                    caches.keys().then((cacheNames) => {
                        return Promise.all(
                            cacheNames.map((cacheName) => {
                                if (!cacheWhitelist.includes(cacheName)) {
                                    return caches.delete(cacheName);
                                }
                            })
                        );
                    })
                );
            });

            // Buscar os arquivos do cache ou da rede
            self.addEventListener('fetch', (event) => {
                event.respondWith(
                    caches.match(event.request)
                        .then((cachedResponse) => {
                            if (cachedResponse) {
                                return cachedResponse;
                            }
                            return fetch(event.request);
                        })
                );
            });
        }
    </script>
</body>
</html>
